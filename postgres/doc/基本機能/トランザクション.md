# トランザクション

## トランザクションの特徴

トランザクションにはACIDという性質がある。

### Atomicity / 原子性

トランザクションの結果は以下のいずれかになる性質

- トランザクションの処理内容が完全に実行されるか
- トランザクションの処理内容が一切実行されないか

### Consistency / 整合性

トランザクションの実行前後でデータの整合性が担保される性質

### Isolation / 分離性

トランザクションの処理が他のトランザクションの処理に影響を与えない性質

### Durability / 持続性

トランザクションのコミットが確実に保存される性質

## トランザクションのコマンド

```SQL
-- トランザクションの開始
BEGIN;
-- コミットしてトランザクションの終了
END
-- トランザクションを途中停止し、処理を最初から取り消す
ABORT

```

### シンタックスシュガー

標準SQLと拡張コマンドとか言ってるけど同じ機能。  
短いので拡張機能を使って書いていく。

|標準SQLコマンド|拡張コマンド|
|:--:|:--:|
|START TRANSACTION|BEGIN|
|COMMIT|END|
|ROLLBACK|ABORT|

- [PostgreSQL 15.0文書 SQLコマンド](https://www.postgresql.jp/document/15/html/sql-commands.html)
